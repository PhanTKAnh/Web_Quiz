{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport { createRegister, LoginAPI } from \"../services/LoginServices\";\nconst UsersReducer = async (state = [], action) => {\n  console.log(state, action);\n  switch (action.type) {\n    case \"CREATE_REGISTER\":\n      const result = await createRegister(action.info);\n      return state;\n    case \"LOGIN\":\n      try {\n        const users = await LoginAPI();\n\n        // Kiểm tra email và mật khẩu có khớp không\n        const user = users.find(item => item.email === action.email && item.password === action.password);\n        if (user) {\n          // Kiểm tra xem user có token hay không\n          const token = user.token || null;\n          if (token) {\n            // Lưu token vào localStorage\n            localStorage.setItem('token', token);\n            Swal.fire({\n              title: \"Đăng Nhập thành công!\",\n              text: \"Chào mừng bạn đến với chúng tôi!\",\n              icon: \"success\",\n              confirmButtonText: \"OK\"\n            });\n            window.location.href = '/home'; // Chuyển hướng đến trang /home\n            return {\n              ...state,\n              user: user,\n              // Lưu thông tin người dùng nếu cần\n              isAuthenticated: true\n            };\n          } else {\n            Swal.fire({\n              title: \"Đăng Nhập thất bại!\",\n              text: \"Người dùng không có token hợp lệ.\",\n              icon: \"error\",\n              confirmButtonText: \"OK\"\n            });\n          }\n        } else {\n          Swal.fire({\n            title: \"Đăng Nhập thất bại!\",\n            text: \"Thông tin đăng nhập không đúng.\",\n            icon: \"error\",\n            confirmButtonText: \"OK\"\n          });\n        }\n      } catch (error) {\n        Swal.fire({\n          title: \"Đăng Nhập thất bại!\",\n          text: \"Đã xảy ra lỗi khi đăng nhập.\",\n          icon: \"error\",\n          confirmButtonText: \"OK\"\n        });\n      }\n      return state;\n    default:\n      return state;\n  }\n};\n_c = UsersReducer;\nexport default UsersReducer;\nvar _c;\n$RefreshReg$(_c, \"UsersReducer\");","map":{"version":3,"names":["Swal","createRegister","LoginAPI","UsersReducer","state","action","console","log","type","result","info","users","user","find","item","email","password","token","localStorage","setItem","fire","title","text","icon","confirmButtonText","window","location","href","isAuthenticated","error","_c","$RefreshReg$"],"sources":["D:/font-endt2/Project-mini-5/project-5/src/reducer/users.js"],"sourcesContent":["import Swal from \"sweetalert2\"; \r\nimport { createRegister, LoginAPI } from \"../services/LoginServices\";\r\n\r\nconst UsersReducer = async (state = [], action) => {\r\n    console.log(state, action);\r\n    switch (action.type) {\r\n        case \"CREATE_REGISTER\":\r\n            const result = await createRegister(action.info);\r\n            return state;\r\n        case \"LOGIN\":\r\n            try {\r\n                const users = await LoginAPI();\r\n                \r\n                // Kiểm tra email và mật khẩu có khớp không\r\n                const user = users.find(item => item.email === action.email && item.password === action.password);\r\n                \r\n                if (user) {\r\n                    // Kiểm tra xem user có token hay không\r\n                    const token = user.token || null;\r\n\r\n                    if (token) {\r\n                        // Lưu token vào localStorage\r\n                        localStorage.setItem('token', token);\r\n\r\n                        Swal.fire({\r\n                            title: \"Đăng Nhập thành công!\",\r\n                            text: \"Chào mừng bạn đến với chúng tôi!\",\r\n                            icon: \"success\",\r\n                            confirmButtonText: \"OK\"\r\n                        });\r\n\r\n                        window.location.href = '/home'; // Chuyển hướng đến trang /home\r\n                        return {\r\n                            ...state,\r\n                            user: user, // Lưu thông tin người dùng nếu cần\r\n                            isAuthenticated: true,\r\n                        };\r\n                    } else {\r\n                        Swal.fire({\r\n                            title: \"Đăng Nhập thất bại!\",\r\n                            text: \"Người dùng không có token hợp lệ.\",\r\n                            icon: \"error\",\r\n                            confirmButtonText: \"OK\"\r\n                        });\r\n                    }\r\n                } else {\r\n                    Swal.fire({\r\n                        title: \"Đăng Nhập thất bại!\",\r\n                        text: \"Thông tin đăng nhập không đúng.\",\r\n                        icon: \"error\",\r\n                        confirmButtonText: \"OK\"\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                Swal.fire({\r\n                    title: \"Đăng Nhập thất bại!\",\r\n                    text: \"Đã xảy ra lỗi khi đăng nhập.\",\r\n                    icon: \"error\",\r\n                    confirmButtonText: \"OK\"\r\n                });\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default UsersReducer;\r\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,aAAa;AAC9B,SAASC,cAAc,EAAEC,QAAQ,QAAQ,2BAA2B;AAEpE,MAAMC,YAAY,GAAG,MAAAA,CAAOC,KAAK,GAAG,EAAE,EAAEC,MAAM,KAAK;EAC/CC,OAAO,CAACC,GAAG,CAACH,KAAK,EAAEC,MAAM,CAAC;EAC1B,QAAQA,MAAM,CAACG,IAAI;IACf,KAAK,iBAAiB;MAClB,MAAMC,MAAM,GAAG,MAAMR,cAAc,CAACI,MAAM,CAACK,IAAI,CAAC;MAChD,OAAON,KAAK;IAChB,KAAK,OAAO;MACR,IAAI;QACA,MAAMO,KAAK,GAAG,MAAMT,QAAQ,CAAC,CAAC;;QAE9B;QACA,MAAMU,IAAI,GAAGD,KAAK,CAACE,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,KAAK,KAAKV,MAAM,CAACU,KAAK,IAAID,IAAI,CAACE,QAAQ,KAAKX,MAAM,CAACW,QAAQ,CAAC;QAEjG,IAAIJ,IAAI,EAAE;UACN;UACA,MAAMK,KAAK,GAAGL,IAAI,CAACK,KAAK,IAAI,IAAI;UAEhC,IAAIA,KAAK,EAAE;YACP;YACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;YAEpCjB,IAAI,CAACoB,IAAI,CAAC;cACNC,KAAK,EAAE,uBAAuB;cAC9BC,IAAI,EAAE,kCAAkC;cACxCC,IAAI,EAAE,SAAS;cACfC,iBAAiB,EAAE;YACvB,CAAC,CAAC;YAEFC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,OAAO,CAAC,CAAC;YAChC,OAAO;cACH,GAAGvB,KAAK;cACRQ,IAAI,EAAEA,IAAI;cAAE;cACZgB,eAAe,EAAE;YACrB,CAAC;UACL,CAAC,MAAM;YACH5B,IAAI,CAACoB,IAAI,CAAC;cACNC,KAAK,EAAE,qBAAqB;cAC5BC,IAAI,EAAE,mCAAmC;cACzCC,IAAI,EAAE,OAAO;cACbC,iBAAiB,EAAE;YACvB,CAAC,CAAC;UACN;QACJ,CAAC,MAAM;UACHxB,IAAI,CAACoB,IAAI,CAAC;YACNC,KAAK,EAAE,qBAAqB;YAC5BC,IAAI,EAAE,iCAAiC;YACvCC,IAAI,EAAE,OAAO;YACbC,iBAAiB,EAAE;UACvB,CAAC,CAAC;QACN;MACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;QACZ7B,IAAI,CAACoB,IAAI,CAAC;UACNC,KAAK,EAAE,qBAAqB;UAC5BC,IAAI,EAAE,8BAA8B;UACpCC,IAAI,EAAE,OAAO;UACbC,iBAAiB,EAAE;QACvB,CAAC,CAAC;MACN;MACA,OAAOpB,KAAK;IAChB;MACI,OAAOA,KAAK;EACpB;AACJ,CAAC;AAAC0B,EAAA,GA9DI3B,YAAY;AAgElB,eAAeA,YAAY;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}