{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport { LoginAPI } from \"../services/LoginServices\";\nconst UsersReducer = async (state = [], action) => {\n  console.log(state, action);\n  switch (action.type) {\n    case \"LOGIN\":\n      try {\n        const response = await LoginAPI({\n          email: action.email,\n          password: action.password\n        });\n        const {\n          token,\n          userInfo\n        } = response; // Đảm bảo API trả về đúng token và userInfo\n\n        if (token) {\n          // Lưu token vào localStorage\n          localStorage.setItem('token', token);\n          Swal.fire({\n            title: \"Đăng Nhập thành công!\",\n            text: \"Chào mừng bạn đến với chúng tôi!\",\n            icon: \"success\",\n            confirmButtonText: \"OK\"\n          });\n          window.location.href = '/home'; // Chuyển hướng đến trang /home\n          return {\n            ...state,\n            user: userInfo,\n            isAuthenticated: true\n          };\n        } else {\n          Swal.fire({\n            title: \"Đăng Nhập thất bại!\",\n            text: \"Thông tin đăng nhập không đúng.\",\n            icon: \"error\",\n            confirmButtonText: \"OK\"\n          });\n        }\n      } catch (error) {\n        Swal.fire({\n          title: \"Đăng Nhập thất bại!\",\n          text: \"Đã xảy ra lỗi khi đăng nhập.\",\n          icon: \"error\",\n          confirmButtonText: \"OK\"\n        });\n      }\n      return state;\n    default:\n      return state;\n  }\n};\n_c = UsersReducer;\nexport default UsersReducer;\nvar _c;\n$RefreshReg$(_c, \"UsersReducer\");","map":{"version":3,"names":["Swal","LoginAPI","UsersReducer","state","action","console","log","type","response","email","password","token","userInfo","localStorage","setItem","fire","title","text","icon","confirmButtonText","window","location","href","user","isAuthenticated","error","_c","$RefreshReg$"],"sources":["D:/font-endt2/Project-mini-5/project-5/src/reducer/users.js"],"sourcesContent":["import Swal from \"sweetalert2\"; \r\nimport { LoginAPI } from \"../services/LoginServices\";\r\n\r\nconst UsersReducer = async (state = [], action) => {\r\n    console.log(state, action);\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            try {\r\n                const response = await LoginAPI({\r\n                    email: action.email,\r\n                    password: action.password\r\n                });\r\n\r\n                const { token, userInfo } = response; // Đảm bảo API trả về đúng token và userInfo\r\n\r\n                if (token) {\r\n                    // Lưu token vào localStorage\r\n                    localStorage.setItem('token', token);\r\n\r\n                    Swal.fire({\r\n                        title: \"Đăng Nhập thành công!\",\r\n                        text: \"Chào mừng bạn đến với chúng tôi!\",\r\n                        icon: \"success\",\r\n                        confirmButtonText: \"OK\"\r\n                    });\r\n\r\n                    window.location.href = '/home'; // Chuyển hướng đến trang /home\r\n                    return {\r\n                        ...state,\r\n                        user: userInfo,\r\n                        isAuthenticated: true,\r\n                    };\r\n                } else {\r\n                    Swal.fire({\r\n                        title: \"Đăng Nhập thất bại!\",\r\n                        text: \"Thông tin đăng nhập không đúng.\",\r\n                        icon: \"error\",\r\n                        confirmButtonText: \"OK\"\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                Swal.fire({\r\n                    title: \"Đăng Nhập thất bại!\",\r\n                    text: \"Đã xảy ra lỗi khi đăng nhập.\",\r\n                    icon: \"error\",\r\n                    confirmButtonText: \"OK\"\r\n                });\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default UsersReducer;\r\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,aAAa;AAC9B,SAASC,QAAQ,QAAQ,2BAA2B;AAEpD,MAAMC,YAAY,GAAG,MAAAA,CAAOC,KAAK,GAAG,EAAE,EAAEC,MAAM,KAAK;EAC/CC,OAAO,CAACC,GAAG,CAACH,KAAK,EAAEC,MAAM,CAAC;EAC1B,QAAQA,MAAM,CAACG,IAAI;IACf,KAAK,OAAO;MACR,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMP,QAAQ,CAAC;UAC5BQ,KAAK,EAAEL,MAAM,CAACK,KAAK;UACnBC,QAAQ,EAAEN,MAAM,CAACM;QACrB,CAAC,CAAC;QAEF,MAAM;UAAEC,KAAK;UAAEC;QAAS,CAAC,GAAGJ,QAAQ,CAAC,CAAC;;QAEtC,IAAIG,KAAK,EAAE;UACP;UACAE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;UAEpCX,IAAI,CAACe,IAAI,CAAC;YACNC,KAAK,EAAE,uBAAuB;YAC9BC,IAAI,EAAE,kCAAkC;YACxCC,IAAI,EAAE,SAAS;YACfC,iBAAiB,EAAE;UACvB,CAAC,CAAC;UAEFC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,OAAO,CAAC,CAAC;UAChC,OAAO;YACH,GAAGnB,KAAK;YACRoB,IAAI,EAAEX,QAAQ;YACdY,eAAe,EAAE;UACrB,CAAC;QACL,CAAC,MAAM;UACHxB,IAAI,CAACe,IAAI,CAAC;YACNC,KAAK,EAAE,qBAAqB;YAC5BC,IAAI,EAAE,iCAAiC;YACvCC,IAAI,EAAE,OAAO;YACbC,iBAAiB,EAAE;UACvB,CAAC,CAAC;QACN;MACJ,CAAC,CAAC,OAAOM,KAAK,EAAE;QACZzB,IAAI,CAACe,IAAI,CAAC;UACNC,KAAK,EAAE,qBAAqB;UAC5BC,IAAI,EAAE,8BAA8B;UACpCC,IAAI,EAAE,OAAO;UACbC,iBAAiB,EAAE;QACvB,CAAC,CAAC;MACN;MACA,OAAOhB,KAAK;IAChB;MACI,OAAOA,KAAK;EACpB;AACJ,CAAC;AAACuB,EAAA,GAjDIxB,YAAY;AAmDlB,eAAeA,YAAY;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}